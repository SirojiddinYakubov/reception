{% load static i18n %}
<fieldset id="person_fieldset">
    <legend>Foydalanuvchi</legend>
    <form action="#" id="organization_form" method="POST">
        {% csrf_token %}
        <div class="row mb-3">
            <label for="person" class="col-form-label not_copy text-start">Foydalanuvchini tanlang<span
                    class="text-danger">*</span></label>
            <div class="col-12">
                <select class="form-select select2" style="width: 100%;" id="person" name="person"
                        required>
                    <option></option>
                    <option value="new" data-style="color: blue;">Yangi foydalanuvchi qo'shish</option>
                    <option value="2">Eshonov Bahodir</option>
                </select>
            </div>
        </div>
        <div id="physical_div">
            <div class="row mb-3">
                <label class="not_copy col-4 col-xl-3 col-form-label text-start"
                       for="last_name">{% trans "Familiya" %}<span
                        class="text-danger">*</span></label>
                <div class="col-8 col-xl-9">
                    <input type="text" id="last_name_x"
                           class="form-control" disabled>
                </div>
            </div>
            <div class="row mb-3">
                <label class="not_copy col-4 col-xl-3 col-form-label text-start"
                       for="first_name">{% trans "Ism" %}<span
                        class="text-danger">*</span></label>
                <div class="col-8 col-xl-9">
                    <input type="text" id="first_name_x"
                           class="form-control" disabled>
                </div>
            </div>
            <div class="row mb-3">
                <label class="not_copy col-4 col-xl-3 col-form-label text-start"
                       for="middle_name">{% trans "Otasining ismi" %}<span
                        class="text-danger">*</span></label>
                <div class="col-8 col-xl-9">
                    <input type="text" id="middle_name_x"
                           class="form-control" disabled>
                </div>
            </div>
            <div class="row mb-3">
                <label class="not_copy col-4 col-xl-3 col-form-label text-start"
                       for="region">{% trans "Viloyat" %}<span
                        class="text-danger">*</span></label>
                <div class="col-8 col-xl-9 region">
                    <input class="form-control" type="text" id="region_x" disabled>
                </div>
            </div>
            <div class="row mb-3">
                <label class="not_copy col-4 col-xl-3 col-form-label text-start"
                       for="district">{% trans "Tuman/Shahar" %}<span
                        class="text-danger">*</span></label>
                <div class="col-8 col-xl-9 district">
                    <input class="form-control" type="text" id="district_x" disabled>
                </div>
            </div>
            <div class="row mb-3">
                <label class="not_copy col-4 col-xl-3 col-form-label text-start"
                       for="quarter">{% trans "Mahalla" %}<span
                        class="text-danger">*</span></label>
                <div class="col-8 col-xl-9 quarter">
                    <input class="form-control" type="text" id="quarter_x" disabled>
                </div>
            </div>


            <div class="justify-content-end row">
                <div class="col-12">
                    <button type="button"
                            class="btn btn-secondary waves-effect waves-light float-start prev">
                        Oldingi
                    </button>
                    <button type="button"
                            class="btn btn-info waves-effect waves-light float-end next">Keyingi
                    </button>
                </div>
            </div>

        </div>

        {% include 'user/role/app_creator/service/_parts/add_organization.html' %}
    </form>
</fieldset>

{% block modals %}
    <!-- Modal -->
    <div class="modal fade" style="display: none" id="add_user_modal" data-bs-backdrop="static"
         data-bs-keyboard="false"
         tabindex="-1"
         aria-labelledby="staticBackdropLabel"
         aria-hidden="true">
        <div class="modal-dialog">
            <div class="modal-content">
                <form action="#" id="confirm_code_form">
                    <div class="modal-header">
                        <h5 class="modal-title" id="add_user_modalLabel">Telefon raqamni tasdiqlash</h5>
                        <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"
                        ></button>
                    </div>
                    <div class="modal-body">
                        <form action="#" method="POST" id="add_user">
                            <div class="row mb-3">
                                <label class="not_copy col-4 col-xl-3 col-form-label text-start"
                                       for="phone">{% trans "Tel raqam/Login" %}<span
                                        class="text-danger">*</span></label>
                                <div class="col-8 col-xl-9 phone_div">
                                    <div class="input-group">
                                        <div class="input-group-prepend">
                                            <div class="input-group-text">+998</div>
                                        </div>
                                        <input type="text" id="phone" name="phone"
                                               class="form-control" required
                                               autocomplete="off">


                                    </div>
                                </div>

                            </div>
                            <div class="row mb-3">
                                <label class="not_copy col-4 col-xl-3 col-form-label text-start"
                                       for="last_name">{% trans "Familiya" %}<span
                                        class="text-danger">*</span></label>
                                <div class="col-8 col-xl-9">
                                    <input type="text" id="last_name" name="last_name"
                                           class="form-control" required

                                           placeholder="{% trans 'Masalan: Yoqubov' %}"
                                           autocomplete="off">
                                </div>
                            </div>
                            <div class="row mb-3">
                                <label class="not_copy col-4 col-xl-3 col-form-label text-start"
                                       for="first_name">{% trans "Ism" %}<span
                                        class="text-danger">*</span></label>
                                <div class="col-8 col-xl-9">
                                    <input type="text" id="first_name" name="first_name"
                                           class="form-control" required

                                           placeholder="{% trans 'Masalan: Sirojiddin' %}"
                                           autocomplete="off">
                                </div>
                            </div>
                            <div class="row mb-3">
                                <label class="not_copy col-4 col-xl-3 col-form-label text-start"
                                       for="middle_name">{% trans "Otasining ismi" %}<span
                                        class="text-danger">*</span></label>
                                <div class="col-8 col-xl-9">
                                    <input type="text" id="middle_name" name="middle_name"
                                           class="form-control" required
                                           placeholder="{% trans 'Masalan: Tojiddinovich' %}"
                                           autocomplete="off">
                                </div>
                            </div>
                            <div class="row mb-3">
                                <label class="not_copy col-4 col-xl-3 col-form-label text-start"
                                       for="birthday">{% trans "Tug'ilgan vaqt" %}<span
                                        class="text-danger">*</span></label>
                                <div class="col-8 col-xl-9">
                                    <input type="date" id="birthday" name="birthday"
                                           class="form-control" required>
                                </div>
                            </div>

                            <div class="row mb-3">
                                <label class="not_copy col-4 col-xl-3 col-form-label text-start"
                                       for="region">{% trans "Viloyat" %}<span
                                        class="text-danger">*</span></label>
                                <div class="col-8 col-xl-9 region">
                                    <select name="region" class="form-control" id="region"
                                            required>
                                        <option value="">--Viloyatni tanlang--</option>
                                        {% for reg in regions %}
                                            <option {% if reg == region %}selected{% endif %}
                                                    value="{{ reg.id }}">{{ reg.title }}</option>
                                        {% endfor %}
                                    </select>
                                </div>
                            </div>
                            <div class="row mb-3">
                                <label class="not_copy col-4 col-xl-3 col-form-label text-start"
                                       for="district">{% trans "Tuman/Shahar" %}<span
                                        class="text-danger">*</span></label>
                                <div class="col-8 col-xl-9 district">
                                    <select name="district" class="form-select select2" id="district"
                                            required>

                                        <option value="">{% trans '--Tumanni tanlang--' %}</option>

                                    </select>
                                </div>
                            </div>
                            <div class="row mb-3">
                                <label class="not_copy col-4 col-xl-3 col-form-label text-start"
                                       for="quarter">{% trans "Mahalla" %}<span
                                        class="text-danger">*</span></label>
                                <div class="col-8 col-xl-9 quarter">
                                    <select name="quarter" class="form-select select2" id="quarter"
                                            required>

                                        <option value="">{% trans '--Mahallani tanlang--' %}</option>


                                    </select>
                                </div>
                            </div>
                            <div class="row mb-3">
                                <label class="not_copy col-4 col-xl-3 col-form-label text-start"
                                       for="address">{% trans "Ko'cha/Qishloq" %}<span
                                        class="text-danger">*</span></label>
                                <div class="col-8 col-xl-9">
                                    <input type="text" id="address" name="address"
                                           class="form-control" required
                                           placeholder="{% blocktrans %}Masalan: M.Iqbol ko'chasi 76-uy{% endblocktrans %}"
                                           autocomplete="off">
                                </div>
                            </div>
                            <div class="row mb-3">
                                <label class="not_copy col-4 col-xl-3 col-form-label text-start"
                                       for="passport_seriya">{% trans "Passport seriya" %}<span
                                        class="text-danger">*</span></label>
                                <div class="col-8 col-xl-9">
                                    <input type="text" id="passport_seriya" name="passport_seriya"
                                           class="form-control text-uppercase" required
                                           placeholder="{% blocktrans %}Masalan: AA{% endblocktrans %}"
                                           autocomplete="off">
                                </div>
                            </div>

                            <div class="row mb-3">
                                <label class="not_copy col-4 col-xl-3 col-form-label text-start"
                                       for="passport_number">{% trans "Passport raqam" %}<span
                                        class="text-danger">*</span></label>
                                <div class="col-8 col-xl-9">
                                    <input type="number" id="passport_number" name="passport_number"
                                           class="form-control" required
                                           placeholder="{% blocktrans %}Masalan: 3870293{% endblocktrans %}"
                                           autocomplete="off">
                                </div>
                            </div>
                            <div class="row mb-3">
                                <label class="not_copy col-4 col-xl-3 col-form-label text-start"
                                       for="issue_by_whom">{% trans "Kim tomonidan berilgan" %}<span
                                        class="text-danger">*</span></label>
                                <div class="col-8 col-xl-9">
                                    <input type="text" id="issue_by_whom" name="issue_by_whom"
                                           class="form-control text-uppercase" required
                                           placeholder="{% blocktrans %}Masalan: BUXORO SHAHAR IIB{% endblocktrans %}"
                                           autocomplete="off">
                                </div>
                            </div>
                            <input type="hidden" value="{{ request.user.id }}" name="created_by">
                        </form>
                    </div>

                    <div class="modal-footer">
                        <button type="button" id="cancel_confirm" class="btn btn-secondary" data-bs-dismiss="modal">
                            Bekor qilish
                        </button>
                        <button type="submit" class="btn btn-primary">Tasdiqlash</button>
                    </div>
                </form>
            </div>
        </div>
    </div>

{% endblock modals %}

{% block js %}
    <script src="{% static 'assets/libs/jquery/jquery.min.js' %}" type="text/javascript"></script>
    <script type="text/javascript">
        $(document).ready(function () {
            $(document).on('change', '#person_type', function (e) {
                var selectedPersonType = $(this).children("option:selected").val();
                $('input[name ="person_type"]').val(selectedPersonType)

                if (selectedPersonType === '1') {
                    $('#title').attr('name', 'title')
                    $('#director').attr('name', 'director')
                    $('#identification_number').attr('name', 'identification_number')
                    $('#legal_address_region').attr('name', 'legal_address_region')
                    $('#legal_address_district').attr('name', 'legal_address_district')
                    $('#address_of_garage').attr('name', 'address_of_garage')

                    $('#physical_div').hide()
                    $('#legal_div').show()


                } else if (selectedPersonType === '0') {
                    $('#title').removeAttr('name')
                    $('#director').removeAttr('name')
                    $('#identification_number').removeAttr('name')
                    $('#legal_address_region').removeAttr('name')
                    $('#legal_address_district').removeAttr('name')
                    $('#address_of_garage').removeAttr('name')

                    $('#physical_div').show()
                    $('#legal_div').hide()

                }
            });
        })
    </script>
{% endblock js %}