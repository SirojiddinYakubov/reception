{% load static i18n %}

<fieldset ref="car_fieldset" v-show="isShowCarFieldset">
    <legend>Transport vositasi</legend>
    <form @keypress.enter.prevent="!carFormIsComplete ? sendCarForm() : ''">
        <div class="alert-danger text-center"><p><b style="color: red; font-size: large">*</b> ushbu belgi qo'yilgan
            maydonlarni to'ldirish majburiy.</p>
        </div>


        <div class="row">
            <label class="not_copy col-12 col-xl-4 col-lg-4 col-md-4 col-sm-4 col-form-label text-start label_required"
                   for="car">{% trans 'Transport vositasi modelini tanlang' %}</label>
            <div class="col-12 col-xl-8 col-lg-8 col-md-8 col-sm-8 car">

                <div class="input-group mb-3">

                    <v-select
                            v-model="carForm.model"
                            :options="carModels"
                            label="title"
                            placeholder="Model nomini qidiring . . . "
                            class="form-control"
                            :class="{'v-error': $v.carForm.model.$error}"
                            :disabled="carFormIsComplete"
                            ref="model"
                    >
                        <span slot="no-options">Siz izlayotgan transport vositasi modeli topilmadi! <a href="#"
                                                                                                       @click="addCarModelDialog = true">yangi model qo'shish</a></span>
                    </v-select>
                    <div v-if="!carFormIsComplete" class="input-group-append" @click="addCarModelDialog = true">
                        <span class="input-group-text" style="height: 32px !important;">
                            <i class="fas fa-plus"></i>
                        </span>
                    </div>
                    <div
                            v-if="$v.carForm.model.$dirty && !$v.carForm.model.required"
                            class="text-danger w-100" style="text-align: start">
                        Transport vositasi modeli tanlanmagan!
                    </div>
                </div>
            </div>
        </div>

        <div class="row mb-3">
            <label class="not_copy col-12 col-xl-4 col-lg-4 col-md-4 col-sm-4 col-form-label text-start label_required"
                   for="type">{% trans 'Transport vositasi turini tanlang' %}</label>
            <div class="col-12 col-xl-8 col-lg-8 col-md-8 col-sm-8">
                <v-select
                        v-model="carForm.type"
                        :options="types"
                        label="title"
                        placeholder="Transport vositasi turini qidiring . . . "
                        class="form-control"
                        :class="{'v-error': $v.carForm.type.$error}"
                        :disabled="carFormIsComplete"
                        ref="type"
                >
                    <span slot="no-options">Siz izlayotgan transport vositasi turi topilmadi. 972800809 raqamiga murojat qiling</span>
                </v-select>
                <div
                        v-if="$v.carForm.type.$dirty && !$v.carForm.type.required"
                        class="text-danger w-100" style="text-align: start">
                    Transport vositasi turi tanlanmagan!
                </div>
            </div>
        </div>

        <div class="row mb-3">
            <label class="not_copy col-12 col-xl-4 col-lg-4 col-md-4 col-sm-4 col-form-label text-start label_required"
                   for="fuel_type">{% trans "Yoqilg'i turini tanlang" %}</label>
            <div class="col-12 col-xl-8 col-lg-8 col-md-8 col-sm-8 fuel_type">
                <v-select
                        v-model="carForm.fuel_type"
                        :options="fuelTypes"
                        label="title"
                        placeholder="Transport vositasi yoqilg'i turini qidiring . . . "
                        class="form-control"
                        :class="{'v-error': $v.carForm.fuel_type.$error}"
                        :disabled="carFormIsComplete"
                        ref="fuel_type"
                >
                    <span slot="no-options">Siz izlayotgan yoqilg'i turi topilmadi. 972800809 raqamiga murojat qiling</span>
                </v-select>
                <div
                        v-if="$v.carForm.fuel_type.$dirty && !$v.carForm.fuel_type.required"
                        class="text-danger w-100" style="text-align: start">
                    Yoqilg'i turi tanlanmagan!
                </div>
            </div>
        </div>

        <div class="row mb-3">
            <label class="not_copy col-12 col-xl-4 col-lg-4 col-md-4 col-sm-4 col-form-label text-start label_required"
                   for="body_type">{% trans 'Kuzov turi' %}</label>
            <div class="col-12 col-xl-8 col-lg-8 col-md-8 col-sm-8">
                <v-select
                        v-model="carForm.body_type"
                        :options="bodyTypes"
                        label="title"
                        placeholder="Kuzov turini qidiring . . . "
                        class="form-control"
                        :class="{'v-error': $v.carForm.body_type.$error}"
                        :disabled="carFormIsComplete"
                        ref="body_type"
                >
                    <span slot="no-options">Siz izlayotgan kuzov turi topilmadi. 972800809 raqamiga murojat qiling</span>
                </v-select>
                <div
                        v-if="$v.carForm.body_type.$dirty && !$v.carForm.body_type.required"
                        class="text-danger w-100" style="text-align: start">
                    Kuzov turi tanlanmagan!
                </div>
            </div>
        </div>
        <div class="row mb-3">
            <label class="not_copy col-12 col-xl-4 col-lg-4 col-md-4 col-sm-4 col-form-label text-start label_required"
                   for="engine_number">{% trans 'Dvigitel raqami' %}</label>
            <div class="col-12 col-xl-8 col-lg-8 col-md-8 col-sm-8">
                <input type="text"
                       class="form-control text-uppercase"
                       v-model.trim="carForm.engine_number"
                       placeholder="{% trans 'Masalan: WZX5645645456' %}"
                       autocomplete="off"
                       :class="{'is-invalid': $v.carForm.engine_number.$error}"
                       :disabled="carFormIsComplete"
                       ref="engine_number"
                >
                <div
                        v-if="$v.carForm.engine_number.$dirty && !$v.carForm.engine_number.required"
                        class="text-danger w-100" style="text-align: start">
                    Dvigitel raqami kiritilmagan!
                </div>
                <div v-if="$v.carForm.engine_number.$dirty && !$v.carForm.engine_number.maxLength"
                     class="text-danger w-100" style="text-align: start">
                    Ushbu qiymat 50 yoki undan kam belgidan iboratligiga ishonch hosil qiling!
                </div>
                <div v-if="$v.carForm.engine_number.$dirty && !$v.carForm.engine_number.alphaNum"
                     class="text-danger w-100" style="text-align: start">
                    Faqat harf va raqam kiriting!
                </div>
                <div class="text-danger" style="text-align: start">
                    [[errorMessages.engine_number]]
                </div>
            </div>
        </div>
        <div class="row mb-3">
            <label class="not_copy col-12 col-xl-4 col-lg-4 col-md-4 col-sm-4 col-form-label text-start label_required"
                   for="body_number">{% trans 'Kuzov raqami' %}</label>
            <div class="col-12 col-xl-8 col-lg-8 col-md-8 col-sm-8">
                <input type="text"
                       v-model.trim="carForm.body_number"
                       id="body_number"
                       class="form-control text-uppercase"
                       placeholder="{% trans 'Masalan: XWB6595645456' %}"
                       autocomplete="off"
                       :class="{'is-invalid': $v.carForm.body_number.$error}"
                       :disabled="carFormIsComplete"
                       ref="body_number"
                >
                <div
                        v-if="$v.carForm.body_number.$dirty && !$v.carForm.body_number.required"
                        class="text-danger w-100" style="text-align: start">
                    Kuzov raqami kiritilmagan!
                </div>
                <div
                        v-if="$v.carForm.body_number.$dirty && !($v.carForm.body_number.minLength && $v.carForm.body_number.maxLength)"
                        class="text-danger w-100" style="text-align: start">
                    Kuzov raqami 17 xonali bo'lishi kerak!
                </div>
                <div v-if="$v.carForm.body_number.$dirty && !$v.carForm.body_number.alphaNum"
                     class="text-danger w-100" style="text-align: start">
                    Faqat harf va raqam kiriting!
                </div>
                <div class="text-danger" style="text-align: start">
                    [[errorMessages.body_number]]
                </div>
            </div>
        </div>
        <div class="row mb-3">
            <label class="not_copy col-12 col-xl-4 col-lg-4 col-md-4 col-sm-4 col-form-label text-start"
                   for="chassis_number">{% trans 'Shassi raqami' %}</label>
            <div class="col-12 col-xl-8 col-lg-8 col-md-8 col-sm-8 chassis_number">
                <input type="text"
                       id="chassis_number"
                       class="form-control text-uppercase"
                       v-model.trim="carForm.chassis_number"
                       placeholder="{% trans 'Masalan: RAQAMSIZ' %}"
                       autocomplete="off"
                       :disabled="carFormIsComplete"
                       ref="chassis_number"
                >
                <div v-if="$v.carForm.chassis_number.$dirty && !$v.carForm.chassis_number.maxLength"
                     class="text-danger w-100" style="text-align: start">
                    Ushbu qiymat 50 yoki undan kam belgidan iboratligiga ishonch hosil qiling!
                </div>
                <div v-if="$v.carForm.chassis_number.$dirty && !$v.carForm.chassis_number.alphaNum"
                     class="text-danger w-100" style="text-align: start">
                    Faqat harf va raqam kiriting!
                </div>
                <div class="text-danger" style="text-align: start">
                    [[errorMessages.chassis_number]]
                </div>
            </div>
        </div>
        <div class="row mb-3">
            <label class="not_copy col-12 col-xl-4 col-lg-4 col-md-4 col-sm-4 col-form-label text-start label_required"
                   for="full_weight">{% trans "To'la vazni" %}</label>
            <div class="col-12 col-xl-8 col-lg-8 col-md-8 col-sm-8 full_weight">
                <input type="number"
                       id="full_weight"
                       v-model.number="carForm.full_weight"
                       class="form-control"
                       placeholder="{% trans 'Masalan: 20500' %}"
                       autocomplete="off"
                       :disabled="carFormIsComplete"
                       ref="full_weight"
                >
                <p class="text-muted" style="font-size: small; margin-bottom: 0; text-align:start">Ushbu
                    qiymatni kilogrammda
                    kiriting!</p>
                <div v-if="$v.carForm.full_weight.$dirty && !$v.carForm.full_weight.maxLength"
                     class="text-danger w-100" style="text-align: start">
                    Ushbu qiymat 10 yoki undan kam belgidan iboratligiga ishonch hosil qiling!
                </div>
                <div class="text-danger" style="text-align: start">
                    [[errorMessages.full_weight]]
                </div>
            </div>
        </div>
        <div class="row mb-3">
            <label class="not_copy col-12 col-xl-4 col-lg-4 col-md-4 col-sm-4 col-form-label text-start label_required"
                   for="empty_weight">{% trans 'Yuksiz vazni' %}</label>
            <div class="col-12 col-xl-8 col-lg-8 col-md-8 col-sm-8 empty_weight">
                <input
                        type="number"
                        id="empty_weight"
                        v-model.number="carForm.empty_weight"
                        class="form-control"
                        placeholder="{% trans 'Masalan: 19500' %}"
                        autocomplete="off"
                        :disabled="carFormIsComplete"
                        ref="empty_weight"
                >
                <p class="text-muted" style="font-size: small; margin-bottom: 0; text-align:start">Ushbu
                    qiymatni kilogrammda
                    kiriting!</p>
                <div v-if="$v.carForm.empty_weight.$dirty && !$v.carForm.empty_weight.maxLength"
                     class="text-danger w-100" style="text-align: start">
                    Ushbu qiymat 10 yoki undan kam belgidan iboratligiga ishonch hosil qiling!
                </div>
                <div class="text-danger" style="text-align: start">
                    [[errorMessages.empty_weight]]
                </div>
            </div>
        </div>
        <div class="row mb-3">
            <label class="not_copy col-12 col-xl-4 col-lg-4 col-md-4 col-sm-4 col-form-label text-start label_required"
                   for="engine_power">{% trans 'Dvigatel quvvati' %}</label>
            <div class="col-12 col-xl-8 col-lg-8 col-md-8 col-sm-8 engine_power">
                <input type="number"
                       id="engine_power"
                       v-model.number="carForm.engine_power"
                       class="form-control"
                       placeholder="{% trans 'Masalan: 120' %}"
                       autocomplete="off"
                       :class="{'is-invalid': $v.carForm.engine_power.$error}"
                       :disabled="carFormIsComplete"
                       ref="engine_power"
                >
                <p class="text-muted" style="font-size: small; margin-bottom: 0; text-align:start">Ushbu
                    qiymatni kilogrammda
                    kiriting!</p>
                <div
                        v-if="$v.carForm.engine_power.$dirty && !$v.carForm.engine_power.required"
                        class="text-danger w-100" style="text-align: start">
                    Dvigatel quvvati kiritilmagan!
                </div>
                <div
                        v-if="$v.carForm.engine_power.$dirty && !$v.carForm.engine_power.maxLength"
                        class="text-danger w-100" style="text-align: start">
                    Dvigatel quvvati eng yuqori 5 xonali bo'lishi mumkin!
                </div>
                <div class="text-danger" style="text-align: start">
                    [[errorMessages.engine_power]]
                </div>
            </div>
        </div>
        <div class="row mb-3">
            <label class="not_copy col-12 col-xl-4 col-lg-4 col-md-4 col-sm-4 col-form-label text-start label_required"
                   for="color">{% trans 'Rangi' %}</label>
            <div class="col-12 col-xl-8 col-lg-8 col-md-8 col-sm-8 color">
                <div class="input-group mb-3">

                    <v-select
                            v-model="carForm.color"
                            :options="colors"
                            label="title"
                            placeholder="Rangni qidiring . . . "
                            class="form-control"
                            :class="{'v-error': $v.carForm.color.$error}"
                            :disabled="carFormIsComplete"
                            ref="color"
                    >
                        <span slot="no-options">Siz izlayotgan rang topilmadi! <a href="#"
                                                                                  @click="addCarColorDialog = true">yangi rang qo'shish</a></span>
                    </v-select>

                    <div v-if="!carFormIsComplete" class="input-group-append" @click="addCarColorDialog = true">
                        <span class="input-group-text">
                            <i class="fas fa-plus"></i>
                        </span>
                    </div>
                    <div
                            v-if="$v.carForm.color.$dirty && !$v.carForm.color.required"
                            class="text-danger w-100" style="text-align: start">
                        Rang tanlanmagan!
                    </div>
                </div>

            </div>
        </div>
        <div class="row mb-3">
            <label class="not_copy col-12 col-xl-4 col-lg-4 col-md-4 col-sm-4 col-form-label text-start label_required"
            >{% trans "Ishlab chiqarilgan kun va oyini aniq bilasizmi?" %}</label>
            <div class="col-12 col-xl-8 col-lg-8 col-md-8 col-sm-8">
                <div class="row justify-content-start mt-1">
                    <div class="col-6 col-lg-4 col-xl-4 text-start">
                        <input type="radio"
                               id="knowMadeYear_yes"
                               v-model="knowMadeYear"
                               :value="true"
                               class="form-check-input"
                               :disabled="carFormIsComplete"
                        >
                        <label class="form-check-label" for="knowMadeYear_yes">Ha, bilaman</label>
                    </div>
                    <div class="col-6 col-lg-4 col-xl-4 text-start">
                        <input type="radio" id="knowMadeYear_no"
                               v-model="knowMadeYear"
                               :value="false"
                               checked
                               class="form-check-input"
                               :disabled="carFormIsComplete"
                        >
                        <label class="form-check-label" for="knowMadeYear_no">Yo'q, bilmayman</label>
                    </div>

                </div>
            </div>
        </div>

        <div class="row mb-3">
            <label class="not_copy col-12 col-xl-4 col-lg-4 col-md-4 col-form-label text-start label_required"
                   style="margin: auto"
                   for="made_year">{% trans 'Ishlab chiqarilgan vaqti' %}</label>
            <div class="col-12 col-xl-8 col-lg-8 col-md-8">

                <div class="row">
                    <div class="col-12 col-sm-4 col-md-4 col-lg-4 col-xl-4" v-show="knowMadeYear">
                        <label class="form-label" style="float: left">Kun</label>
                        <div class="input-group input-group-merge">
                            <input type="text"
                                   ref="day"
                                   class="form-control"
                                   v-model="carForm.day"
                                   placeholder="Kunni tanlang"
                                   :disabled="carFormIsComplete"
                            >
                            <div class="input-group-text icon" @click="() => $refs.day.focus()">
                                <i class="fas fa-calendar-day"></i>
                            </div>
                        </div>
                    </div>
                    <div class="col-12 col-sm-4 col-md-4 col-lg-4 col-xl-4" v-show="knowMadeYear">
                        <label for="password" class="form-label" style="float: left">Oy</label>
                        <div class="input-group input-group-merge">
                            <input type="text"
                                   ref="month"
                                   class="form-control"
                                   v-model="carForm.month"
                                   placeholder="Oyni tanlang"
                                   :disabled="carFormIsComplete"
                            >
                            <div class="input-group-text icon" @click="() => $refs.month.focus()">
                                <i class="fas fa-calendar-day"></i>
                            </div>
                        </div>
                    </div>
                    <div class="col-12 col-sm-4 col-md-4 col-lg-4 col-xl-4 year">
                        <label for="password" class="form-label label_required" style="float: left">Yil</label>
                        <div class="input-group input-group-merge">
                            <input
                                    type="text"
                                    ref="year"
                                    class="form-control"
                                    v-model="carForm.year"
                                    placeholder="Yil tanlang"
                                    :class="{'is-invalid': $v.carForm.year.$error}"
                                    :disabled="carFormIsComplete"
                            >
                            <div class="input-group-text icon" @click="() => $refs.year.focus()">
                                <i class="fas fa-calendar-day"></i>
                            </div>
                        </div>
                        <div
                                v-if="$v.carForm.year.$dirty && !$v.carForm.year.required"
                                class="text-danger w-100" style="text-align: start">
                            Yil kiritilmagan!
                        </div>
                    </div>
                </div>

            </div>
        </div>
        <div class="row mb-3">
            <label class="not_copy col-12 col-xl-4 col-lg-4 col-md-4 col-sm-4 col-form-label text-start label_required"
                   for="lost_technical_passport">{% trans "Qayd etish guvohnomasi yo'qolganmi?" %}</label>
            <div class="col-12 col-xl-8 col-lg-8 col-md-8 col-sm-8">
                <div class="row justify-content-start mt-1">
                    <div class="col-6 col-lg-4 col-xl-4 text-start">
                        <input type="radio"
                               id="lost_technical_passport_yes"
                               v-model="carForm.lost_technical_passport"
                               :value="true"
                               class="form-check-input"
                               :disabled="carFormIsComplete"
                        >
                        <label class="form-check-label" for="lost_technical_passport_yes">Ha, yo'qolgan</label>
                    </div>
                    <div class="col-6 col-lg-4 col-xl-4 text-start">
                        <input type="radio"
                               id="lost_technical_passport_no"
                               v-model="carForm.lost_technical_passport"
                               :value="false" checked
                               :disabled="carFormIsComplete"
                               class="form-check-input">
                        <label class="form-check-label" for="lost_technical_passport_no">Yo'q, yo'qolmagan</label>
                    </div>

                </div>
            </div>
        </div>
        <div class="row mb-3" v-if="!carForm.lost_technical_passport">
            <label class="not_copy col-12 col-xl-4 col-lg-4 col-md-4 col-sm-4 col-form-label text-start label_required"
                   for="old_technical_passport">{% trans "Qayd etish guvohnomasi seriyasi va raqami" %}</label>
            <div class="col-12 col-xl-8 col-lg-8 col-md-8 col-sm-8">
                <input type="text" id="old_technical_passport"
                       v-model.trim="carForm.old_technical_passport"
                       class="form-control text-uppercase"
                       placeholder="{% trans 'Masalan: AAF4567895' %}"
                       autocomplete="off"
                       :class="{'is-invalid': $v.carForm.old_technical_passport.$error}"
                       :disabled="carFormIsComplete"
                       ref="old_technical_passport"
                >
                <div
                        v-if="$v.carForm.old_technical_passport.$dirty && !$v.carForm.old_technical_passport.required"
                        class="text-danger w-100" style="text-align: start">
                    Qayd etish guvohnomasi seriyasi va raqami kiritilmagan!
                </div>
                <div v-if="$v.carForm.old_technical_passport.$dirty && $v.carForm.old_technical_passport.required && !$v.carForm.old_technical_passport.maxLength"
                     class="text-danger w-100" style="text-align: start">
                    Ushbu qiymat 30 yoki undan kam belgidan iboratligiga ishonch hosil qiling!
                </div>
                <div v-if="$v.carForm.old_technical_passport.$dirty && !$v.carForm.old_technical_passport.alphaNum"
                     class="text-danger w-100" style="text-align: start">
                    Faqat harf va raqam kiriting!
                </div>
                <div class="text-danger" style="text-align: start">
                    [[errorMessages.old_technical_passport]]
                </div>
            </div>
        </div>
        <div class="row mb-3"
             v-if="hideDiv(carForm.is_auction, carForm.is_another_car, carForm.lost_number, carForm.is_saved_number)">
            <label class="not_copy col-12 col-xl-4 col-lg-4 col-md-4 col-sm-4 col-form-label text-start label_required"
                   for="save_old_number">{% trans "Transport vositasidagi DRBni saqlab qolish" %}</label>
            <div class="col-12 col-xl-8 col-lg-8 col-md-8 col-sm-8">
                <div class="row justify-content-start mt-1">
                    <div class="col-6 col-lg-4 col-xl-4 text-start">
                        <input type="radio"
                               id="save_old_number_yes"
                               v-model="carForm.save_old_number"
                               :value="true"
                               :disabled="carFormIsComplete"
                               class="form-check-input">
                        <label class="form-check-label" for="save_old_number_yes">Ha, saqlab qolaman</label>
                    </div>
                    <div class="col-6 col-lg-4 col-xl-4 text-start">
                        <input type="radio" id="save_old_number_no"
                               v-model="carForm.save_old_number"
                               :value="false"
                               :disabled="carFormIsComplete"
                               class="form-check-input">
                        <label class="form-check-label" for="save_old_number_no">Yo'q, saqlab qolmayman</label>
                    </div>

                </div>
            </div>
        </div>
        <div class="row mb-3" v-if="!carForm.save_old_number">
            <label class="not_copy col-12 col-xl-4 col-lg-4 col-md-4 col-sm-4 col-form-label text-start label_required"
                   for="lost_number">{% trans "Transport vositasidagi DRB yo'qolganmi?" %}</label>
            <div class="col-12 col-xl-8 col-lg-8 col-md-8 col-sm-8">
                <div class="row justify-content-start mt-1">
                    <div class="col-6 col-lg-4 col-xl-4 text-start">
                        <input type="radio" id="lost_number_yes"
                               v-model="carForm.lost_number"
                               :value="true"
                               :disabled="carFormIsComplete"
                               class="form-check-input">
                        <label class="form-check-label" for="lost_number_yes">Ha, yo'qolgan</label>
                    </div>
                    <div class="col-6 col-lg-4 col-xl-4 text-start">
                        <input type="radio" id="lost_number_no"
                               v-model="carForm.lost_number"
                               :value="false"
                               :disabled="carFormIsComplete"
                               class="form-check-input">
                        <label class="form-check-label" for="lost_number_no">Yo'q, yo'qolmagan</label>
                    </div>

                </div>
            </div>
        </div>
        <div class="row mb-3" v-if="!carForm.lost_number">
            <label class="not_copy col-12 col-xl-4 col-lg-4 col-md-4 col-sm-4 col-form-label text-start label_required"
                   for="old_number">{% trans "Transport vositasidagi DRB" %}</label>
            <div class="col-12 col-xl-8 col-lg-8 col-md-8 col-sm-8">
                <input type="text" id="old_number"
                       v-model.trim="carForm.old_number"
                       class="form-control text-uppercase"
                       placeholder="{% trans 'Masalan: 01K979AB' %}"
                       autocomplete="off"
                       :disabled="carFormIsComplete"
                       :class="{'is-invalid': $v.carForm.old_number.$error}"
                       ref="old_number"
                >
                <div
                        v-if="$v.carForm.old_number.$dirty && !$v.carForm.old_number.required"
                        class="text-danger w-100" style="text-align: start">
                    Transport vositasidagi DRB kiritilmagan!
                </div>
                <div v-if="$v.carForm.old_number.$dirty && !$v.carForm.old_number.maxLength"
                     class="text-danger w-100" style="text-align: start">
                    Ushbu qiymat 15 yoki undan kam belgidan iboratligiga ishonch hosil qiling!
                </div>
                <div v-if="$v.carForm.old_number.$dirty && !$v.carForm.old_number.alphaNum"
                     class="text-danger w-100" style="text-align: start">
                    Faqat harf va raqam kiriting!
                </div>
                <div class="text-danger" style="text-align: start">
                    [[errorMessages.old_number]]
                </div>
            </div>
        </div>
        <div class="row mb-3" id="is_old_number_div">
            <label class="not_copy col-12 col-xl-4 col-lg-4 col-md-4 col-sm-4 col-form-label text-start label_required"
                   for="is_old_number">{% trans 'Transport vositasidagi DRB eski namunadami? Masalan: 01 A 5555' %}</label>
            <div class="col-12 col-xl-8 col-lg-8 col-md-8 col-sm-8">
                <div class="row justify-content-start mt-1">
                    <div class="col-6 col-lg-4 col-xl-4 text-start">
                        <input type="radio"
                               id="is_old_number_yes"
                               v-model="carForm.is_old_number"
                               :value="true"
                               :disabled="carFormIsComplete"
                               class="form-check-input">
                        <label class="form-check-label" for="is_old_number_yes">Ha, eski</label>
                    </div>
                    <div class="col-6 col-lg-4 col-xl-4 text-start">
                        <input type="radio" id="is_old_number_no"
                               v-model="carForm.is_old_number"
                               class="form-check-input"
                               :disabled="carFormIsComplete"
                               :value="false">
                        <label class="form-check-label" for="is_old_number_no">Yo'q, eski emas</label>
                    </div>

                </div>


            </div>
        </div>
        <div class="row mb-3" v-if="hideDiv(carForm.is_auction, carForm.save_old_number, carForm.is_another_car)">
            <label class="not_copy col-12 col-xl-4 col-lg-4 col-md-4 col-sm-4 col-form-label text-start label_required"
                   for="is_saved_number">{% trans 'Yangi olinadigan DRB YXHB zahirasida saqlanmoqdami?' %}</label>
            <div class="col-12 col-xl-8 col-lg-8 col-md-8 col-sm-8">
                <div class="row justify-content-start mt-1">
                    <div class="col-6 col-lg-4 col-xl-4 text-start">
                        <input type="radio" id="is_saved_number_yes"
                               v-model="carForm.is_saved_number"
                               class="form-check-input"
                               :disabled="carFormIsComplete"
                               :value="true">
                        <label class="form-check-label" for="is_saved_number_yes">Ha, saqlanyapti</label>
                    </div>
                    <div class="col-6 col-lg-4 col-xl-4 text-start">
                        <input type="radio"
                               id="is_saved_number_no"
                               v-model="carForm.is_saved_number"
                               class="form-check-input"
                               :disabled="carFormIsComplete"
                               :value="false">
                        <label class="form-check-label" for="is_saved_number_no">Yo'q, saqlanmayapti</label>
                    </div>

                </div>
            </div>
        </div>
        <div class="row mb-3" v-if="carForm.is_saved_number">
            <label class="not_copy col-12 col-xl-4 col-lg-4 col-md-4 col-sm-4 col-form-label text-start label_required"
                   for="saved_number">{% trans "Zahiradagi DRB" %}</label>
            <div class="col-12 col-xl-8 col-lg-8 col-md-8 col-sm-8">
                <input type="text" id="saved_number"
                       v-model.trim="carForm.saved_number"
                       class="form-control text-uppercase"
                       placeholder="{% trans 'Masalan: 01K979AB' %}"
                       autocomplete="off"
                       :disabled="carFormIsComplete"
                       :class="{'is-invalid': $v.carForm.saved_number.$error}"
                       ref="saved_number"
                >
                <div
                        v-if="$v.carForm.saved_number.$dirty && !$v.carForm.saved_number.required"
                        class="text-danger w-100" style="text-align: start">
                    Zahiradagi DRB kiritilmagan!
                </div>
                <div v-if="$v.carForm.saved_number.$dirty && $v.carForm.saved_number.required && !$v.carForm.saved_number.maxLength"
                     class="text-danger w-100" style="text-align: start">
                    Ushbu qiymat 15 yoki undan kam belgidan iboratligiga ishonch hosil qiling!
                </div>
                <div v-if="$v.carForm.saved_number.$dirty && !$v.carForm.saved_number.alphaNum"
                     class="text-danger w-100" style="text-align: start">
                    Faqat harf va raqam kiriting!
                </div>
                <div class="text-danger" style="text-align: start">
                    [[errorMessages.saved_number]]
                </div>
            </div>
        </div>
        <div class="row mb-3" v-if="hideDiv(carForm.save_old_number, carForm.is_auction, carForm.is_saved_number)">
            <label class="not_copy col-12 col-xl-4 col-lg-4 col-md-4 col-sm-4 col-form-label text-start label_required"
                   for="is_another_car">{% trans 'Boshqa transport vositasitangizdagi DRBni olmoqchimisiz?' %}</label>
            <div class="col-12 col-xl-8 col-lg-8 col-md-8 col-sm-8">
                <div class="row justify-content-start mt-1">
                    <div class="col-6 col-lg-4 col-xl-4 text-start">
                        <input type="radio"
                               id="is_another_car_yes"
                               v-model="carForm.is_another_car"
                               class="form-check-input"
                               :disabled="carFormIsComplete"
                               :value="true">
                        <label class="form-check-label" for="is_another_car_number_yes">Ha, olmoqchiman</label>
                    </div>
                    <div class="col-6 col-lg-4 col-xl-4 text-start">
                        <input type="radio"
                               id="is_another_car_no"
                               v-model="carForm.is_another_car"
                               class="form-check-input"
                               :disabled="carFormIsComplete"
                               :value="false">
                        <label class="form-check-label" for="is_another_car_no">Yo'q, olmayman</label>
                    </div>

                </div>
            </div>
        </div>
        <div class="row mb-3" v-if="carForm.is_another_car">
            <label class="not_copy col-12 col-xl-4 col-lg-4 col-md-4 col-sm-4 col-form-label text-start label_required"
                   for="saved_number">{% trans "Boshqa transport vositasitangizdagi DRB" %}</label>
            <div class="col-12 col-xl-8 col-lg-8 col-md-8 col-sm-8">
                <input type="text" id="another_car_number"
                       v-model.trim="carForm.another_car_number"
                       class="form-control text-uppercase"
                       placeholder="{% trans 'Masalan: 01K979AB' %}"
                       autocomplete="off"
                       :disabled="carFormIsComplete"
                       :class="{'is-invalid': $v.carForm.another_car_number.$error}"
                       ref="another_car_number"
                >
                <div
                        v-if="$v.carForm.another_car_number.$dirty && !$v.carForm.another_car_number.required"
                        class="text-danger w-100" style="text-align: start">
                    Boshqa transport vositasitangizdagi DRB kiritilmagan!
                </div>
                <div v-if="$v.carForm.another_car_number.$dirty && !$v.carForm.another_car_number.maxLength"
                     class="text-danger w-100" style="text-align: start">
                    Ushbu qiymat 15 yoki undan kam belgidan iboratligiga ishonch hosil qiling!
                </div>
                <div v-if="$v.carForm.another_car_number.$dirty && !$v.carForm.another_car_number.alphaNum"
                     class="text-danger w-100" style="text-align: start">
                    Faqat harf va raqam kiriting!
                </div>
                <div class="text-danger" style="text-align: start">
                    [[errorMessages.another_car_number]]
                </div>
            </div>
        </div>
        <div class="row mb-3" v-if="hideDiv(carForm.save_old_number, carForm.is_another_car, carForm.is_saved_number)">
            <label class="not_copy col-12 col-xl-4 col-lg-4 col-md-4 col-sm-4 col-form-label text-start label_required"
                   for="is_auction">{% trans 'Yangi olinadigan DRB auksiondan olinganmi?' %}</label>
            <div class="col-12 col-xl-8 col-lg-8 col-md-8 col-sm-8">
                <div class="row justify-content-start mt-1">
                    <div class="col-6 col-lg-4 col-xl-4 text-start">
                        <input type="radio"
                               id="is_auction_yes"
                               v-model="carForm.is_auction"
                               class="form-check-input"
                               :disabled="carFormIsComplete"
                               :value="true">
                        <label class="form-check-label" for="is_auction_yes">Ha, auksiondan olingan</label>
                    </div>
                    <div class="col-6 col-lg-4 col-xl-4 text-start">
                        <input type="radio" id="is_auction_no"
                               v-model="carForm.is_auction"
                               class="form-check-input"
                               :disabled="carFormIsComplete"
                               :value="false">
                        <label class="form-check-label" for="is_auction_no">Yo'q, auksiondan olinmagan</label>
                    </div>

                </div>


            </div>
        </div>

        <div class="row mb-3" v-if="carForm.is_auction">
            <label class="not_copy col-12 col-xl-4 col-lg-4 col-md-4 col-sm-4 col-form-label text-start label_required"
                   for="auction_number">{% trans "Auksiondan olingan DRB" %}</label>
            <div class="col-12 col-xl-8 col-lg-8 col-md-8 col-sm-8">
                <input type="text" id="auction_number"
                       v-model.trim="carForm.auction_number"
                       class="form-control text-uppercase"
                       placeholder="{% trans 'Masalan: 01K979AB' %}"
                       autocomplete="off"
                       :disabled="carFormIsComplete"
                       :class="{'is-invalid': $v.carForm.auction_number.$error}"
                       ref="auction_number"
                >
                <div
                        v-if="$v.carForm.auction_number.$dirty && !$v.carForm.auction_number.required"
                        class="text-danger w-100" style="text-align: start">
                    Auksiondan olingan DRB kiritilmagan!
                </div>
                <div v-if="$v.carForm.auction_number.$dirty && $v.carForm.auction_number.required && !$v.carForm.auction_number.maxLength"
                     class="text-danger w-100" style="text-align: start">
                    Ushbu qiymat 15 yoki undan kam belgidan iboratligiga ishonch hosil qiling!
                </div>
                <div v-if="$v.carForm.auction_number.$dirty && !$v.carForm.auction_number.alphaNum"
                     class="text-danger w-100" style="text-align: start">
                    Faqat harf va raqam kiriting!
                </div>
                 <div class="text-danger" style="text-align: start">
                    [[errorMessages.auction_number]]
                </div>
            </div>
        </div>
        <div class="row mb-3">
            <label class="not_copy col-12 col-xl-4 col-lg-4 col-md-4 col-sm-4 col-form-label text-start"
                   for="device">{% trans "Qayta jihozlash turlari" %}</label>
            <div class="col-12 col-xl-8 col-lg-8 col-md-8 col-sm-8">
                <v-multiselect v-model="carForm.device"
                               label="title"
                               track-by="id"
                               placeholder="Alohida belgini tanlang . . ."
                               open-direction="top"
                               :options="devices"
                               :disabled="carFormIsComplete"
                               :multiple="true">
                    <span slot="noResult">Siz izlayotgan alohida belgi topilmadi. 972800809 raqamiga murojat qiling</span>
                </v-multiselect>
            </div>
        </div>

        <div class="justify-content-end row">
            <div class="col-12">
                <button type="button" class="btn btn-secondary waves-effect waves-light float-start"
                        @click="()=>{isShowDocumentFieldset = true; isShowCarFieldset = false}"
                >Oldingi
                </button>
                {#                <button type="button" id="fake" class="btn btn-danger">Fake</button>#}
                <button type="button"
                        @click="carFormIsComplete ? changeFieldset('isShowSectionFieldset', 'isShowCarFieldset') : sendCarForm()"
                        class="btn btn-info waves-effect waves-light float-end next">Keyingi
                </button>
            </div>
        </div>
    </form>
</fieldset>

{% block modals %}
    {% include 'modals/add_car_model_modal_vue.html' %}
    {% include 'modals/add_car_color_modal_vue.html' %}
{% endblock modals %}




{#{% load static i18n %}#}
{#<fieldset id="car_fieldset" style="display: none">#}
{#    <legend>Transport vositasi</legend>#}
{#    <form action="#" id="save_car_form" method="post">#}
{#        <input type='hidden' value="0" name="person_type">#}
{#        <input type='hidden' value="" name="organization">#}
{#        <input type='hidden' value="" name="seriya">#}
{#        <input type='hidden' value="" name="contract_date">#}
{##}
{#        <div class="alert-danger text-center"><p><b style="color: red; font-size: large">*</b> ushbu belgi qo'yilgan#}
{#            qatorlarni to'ldirish majburiy.</p>#}
{#        </div>#}
{##}
{##}
{#        <div class="row mb-3">#}
{#            <label class="not_copy col-12 col-xl-4 col-lg-4 col-md-4 col-sm-4 col-form-label text-start"#}
{#                   for="car">{% trans 'Transport vositasi modelini tanlang' %}<span#}
{#                    class="text-danger">*</span></label>#}
{#            <div class="col-12 col-xl-8 col-lg-8 col-md-8 col-sm-8 car">#}
{#                <select id="car" name="car" required class="form-control">#}
{#                    <option></option>#}
{#                    <option data-style="color: blue;" value="new">Yangi model qo'shish</option>#}
{#                </select>#}
{#            </div>#}
{#        </div>#}
{##}
{#        <div class="row mb-3">#}
{#            <label class="not_copy col-12 col-xl-4 col-lg-4 col-md-4 col-sm-4 col-form-label text-start"#}
{#                   for="type">{% trans 'Transport vositasi turini tanlang' %}<span#}
{#                    class="text-danger">*</span></label>#}
{#            <div class="col-12 col-xl-8 col-lg-8 col-md-8 col-sm-8">#}
{#                <select id="type" name="type" required data-width="100%"#}
{#                        class="form-select">#}
{#                </select>#}
{#            </div>#}
{#        </div>#}
{##}
{#        <div class="row mb-3">#}
{#            <label class="not_copy col-12 col-xl-4 col-lg-4 col-md-4 col-sm-4 col-form-label text-start"#}
{#                   for="fuel_type">{% trans "Yoqilg'i turini tanlang" %}<span#}
{#                    class="text-danger">*</span></label>#}
{#            <div class="col-12 col-xl-8 col-lg-8 col-md-8 col-sm-8 fuel_type">#}
{##}
{#                <select id="fuel_type" name="fuel_type" class="form-select">#}
{#                </select>#}
{#            </div>#}
{#        </div>#}
{##}
{#        <div class="row mb-3">#}
{#            <label class="not_copy col-12 col-xl-4 col-lg-4 col-md-4 col-sm-4 col-form-label text-start"#}
{#                   for="body_type">{% trans 'Kuzov turi' %}<span#}
{#                    class="text-danger">*</span></label>#}
{#            <div class="col-12 col-xl-8 col-lg-8 col-md-8 col-sm-8">#}
{#                <select id="body_type" name="body_type" class="form-select" required#}
{#                        data-width="100%">#}
{#                </select>#}
{#            </div>#}
{#        </div>#}
{#        <div class="row mb-3">#}
{#            <label class="not_copy col-12 col-xl-4 col-lg-4 col-md-4 col-sm-4 col-form-label text-start"#}
{#                   for="engine_number">{% trans 'Dvigitel raqami' %}<span#}
{#                    class="text-danger">*</span></label>#}
{#            <div class="col-12 col-xl-8 col-lg-8 col-md-8 col-sm-8">#}
{#                <input type="text" id="engine_number" name="engine_number"#}
{#                       class="form-control text-uppercase" required#}
{#                       placeholder="{% trans 'Masalan: WZX5645645456' %}"#}
{#                       autocomplete="off">#}
{#            </div>#}
{#        </div>#}
{#        <div class="row mb-3">#}
{#            <label class="not_copy col-12 col-xl-4 col-lg-4 col-md-4 col-sm-4 col-form-label text-start"#}
{#                   for="body_number">{% trans 'Kuzov raqami' %}<span#}
{#                    class="text-danger">*</span></label>#}
{#            <div class="col-12 col-xl-8 col-lg-8 col-md-8 col-sm-8">#}
{#                <input type="text" id="body_number" name="body_number"#}
{#                       class="form-control text-uppercase" required#}
{#                       placeholder="{% trans 'Masalan: XWB6595645456' %}"#}
{#                       autocomplete="off">#}
{#            </div>#}
{#        </div>#}
{#        <div class="row mb-3">#}
{#            <label class="not_copy col-12 col-xl-4 col-lg-4 col-md-4 col-sm-4 col-form-label text-start"#}
{#                   for="chassis_number">{% trans 'Shassi raqami' %}</label>#}
{#            <div class="col-12 col-xl-8 col-lg-8 col-md-8 col-sm-8 chassis_number">#}
{#                <input type="text" id="chassis_number"#}
{#                       class="form-control text-uppercase" name="chassis_number"#}
{#                       placeholder="{% trans 'Masalan: RAQAMSIZ' %}"#}
{#                       autocomplete="off">#}
{#            </div>#}
{#        </div>#}
{#        <div class="row mb-3">#}
{#            <label class="not_copy col-12 col-xl-4 col-lg-4 col-md-4 col-sm-4 col-form-label text-start"#}
{#                   for="full_weight">{% trans "To'la vazni" %}<span#}
{#                    class="text-danger">*</span></label>#}
{#            <div class="col-12 col-xl-8 col-lg-8 col-md-8 col-sm-8 full_weight">#}
{#                <input type="number" id="full_weight" name="full_weight"#}
{#                       class="form-control" required#}
{#                       placeholder="{% trans 'Masalan: 20500' %}"#}
{#                       autocomplete="off">#}
{#                <p class="text-muted" style="font-size: small; margin-bottom: 0; text-align:start">Ushbu#}
{#                    qiymatni kilogrammda#}
{#                    kiriting!</p>#}
{#            </div>#}
{#        </div>#}
{#        <div class="row mb-3">#}
{#            <label class="not_copy col-12 col-xl-4 col-lg-4 col-md-4 col-sm-4 col-form-label text-start"#}
{#                   for="empty_weight">{% trans 'Yuksiz vazni' %}<span#}
{#                    class="text-danger">*</span></label>#}
{#            <div class="col-12 col-xl-8 col-lg-8 col-md-8 col-sm-8 empty_weight">#}
{#                <input type="number" id="empty_weight" name="empty_weight"#}
{#                       class="form-control" required#}
{#                       placeholder="{% trans 'Masalan: 19500' %}"#}
{#                       autocomplete="off">#}
{#                <p class="text-muted" style="font-size: small; margin-bottom: 0; text-align:start">Ushbu#}
{#                    qiymatni kilogrammda#}
{#                    kiriting!</p>#}
{#            </div>#}
{#        </div>#}
{#        <div class="row mb-3">#}
{#            <label class="not_copy col-12 col-xl-4 col-lg-4 col-md-4 col-sm-4 col-form-label text-start"#}
{#                   for="engine_power">{% trans 'Dvigatel quvvati' %}<span#}
{#                    class="text-danger">*</span></label>#}
{#            <div class="col-12 col-xl-8 col-lg-8 col-md-8 col-sm-8 engine_power">#}
{#                <input type="number" id="engine_power" name="engine_power"#}
{#                       class="form-control"#}
{#                       placeholder="{% trans 'Masalan: 120' %}"#}
{#                       autocomplete="off" required>#}
{#                <p class="text-muted" style="font-size: small; margin-bottom: 0; text-align:start">Ushbu#}
{#                    qiymatni kilogrammda#}
{#                    kiriting!</p>#}
{#            </div>#}
{#        </div>#}
{#        <div class="row mb-3">#}
{#            <label class="not_copy col-12 col-xl-4 col-lg-4 col-md-4 col-sm-4 col-form-label text-start"#}
{#                   for="color">{% trans 'Rangi' %}<span#}
{#                    class="text-danger">*</span></label>#}
{#            <div class="col-12 col-xl-8 col-lg-8 col-md-8 col-sm-8 color">#}
{#                <select id="color" name="color" required class="form-control select2 color"#}
{#                        data-width="100%">#}
{#                    <option></option>#}
{#                    <option data-style="color: blue;" value="new">Yangi rang qo'shish</option>#}
{#                </select>#}
{#            </div>#}
{#        </div>#}
{#        <div class="row mb-3" id="made_year_div">#}
{#            <label class="not_copy col-12 col-xl-4 col-lg-4 col-md-4 col-form-label text-start"#}
{#                   style="margin: auto"#}
{#                   for="made_year">{% trans 'Ishlab chiqarilgan vaqti' %}<span#}
{#                    class="text-danger">*</span></label>#}
{#            <div class="col-12 col-xl-8 col-lg-8 col-md-8">#}
{#                <div class="row">#}
{#                    <div class="col-12 col-sm-4 col-md-4 col-lg-4 col-xl-4">#}
{#                        <label for="password" class="form-label" style="float: left">Kun</label>#}
{#                        <div class="input-group input-group-merge">#}
{#                            <input type="text" id="day" class="form-control" placeholder="Kunni tanlang">#}
{#                            <div class="input-group-text icon">#}
{#                                <i class="fas fa-calendar-day"></i>#}
{#                            </div>#}
{#                        </div>#}
{#                    </div>#}
{#                    <div class="col-12 col-sm-4 col-md-4 col-lg-4 col-xl-4">#}
{#                        <label for="password" class="form-label" style="float: left">Oy</label>#}
{#                        <div class="input-group input-group-merge">#}
{#                            <input type="text" id="month" class="form-control" placeholder="Oyni tanlang">#}
{#                            <div class="input-group-text icon">#}
{#                                <i class="fas fa-calendar-day"></i>#}
{#                            </div>#}
{#                        </div>#}
{#                    </div>#}
{#                    <div class="col-12 col-sm-4 col-md-4 col-lg-4 col-xl-4 year">#}
{#                        <label for="password" class="form-label" style="float: left">Yil<span#}
{#                                style="color: red">*</span></label>#}
{#                        <div class="input-group input-group-merge">#}
{#                            <input type="text" id="year" name="year" class="form-control" required#}
{#                                   placeholder="Yil tanlang">#}
{#                            <div class="input-group-text icon">#}
{#                                <i class="fas fa-calendar-day"></i>#}
{#                            </div>#}
{#                        </div>#}
{#                    </div>#}
{#                </div>#}
{##}
{#            </div>#}
{#        </div>#}
{#        <div class="row mb-3">#}
{#            <label class="not_copy col-12 col-xl-4 col-lg-4 col-md-4 col-sm-4 col-form-label text-start"#}
{#                   for="lost_technical_passport">{% trans "Qayd etish guvohnomasi yo'qolganmi?" %}<span#}
{#                    class="text-danger">*</span></label>#}
{#            <div class="col-12 col-xl-8 col-lg-8 col-md-8 col-sm-8">#}
{#                <div class="row justify-content-start mt-1">#}
{#                    <div class="col-6 col-lg-4 col-xl-4 text-start">#}
{#                        <input type="radio" id="lost_technical_passport_yes"#}
{#                               name="lost_technical_passport" value="true"#}
{#                               class="form-check-input">#}
{#                        <label class="form-check-label" for="lost_technical_passport_yes">Ha, yo'qolgan</label>#}
{#                    </div>#}
{#                    <div class="col-6 col-lg-4 col-xl-4 text-start">#}
{#                        <input type="radio" id="lost_technical_passport_no"#}
{#                               name="lost_technical_passport" value="false" checked#}
{#                               class="form-check-input">#}
{#                        <label class="form-check-label" for="lost_technical_passport_no">Yo'q, yo'qolmagan</label>#}
{#                    </div>#}
{##}
{#                </div>#}
{#            </div>#}
{#        </div>#}
{#        <div class="row mb-3" id="old_technical_passport_div">#}
{#            <label class="not_copy col-12 col-xl-4 col-lg-4 col-md-4 col-sm-4 col-form-label text-start"#}
{#                   for="old_technical_passport">{% trans "Qayd etish guvohnomasi seriyasi va raqami" %}<span#}
{#                    class="text-danger">*</span></label>#}
{#            <div class="col-12 col-xl-8 col-lg-8 col-md-8 col-sm-8">#}
{#                <input type="text" id="old_technical_passport" name="old_technical_passport"#}
{#                       class="form-control text-uppercase" required#}
{#                       placeholder="{% trans 'Masalan: AAF4567895' %}"#}
{#                       autocomplete="off">#}
{#            </div>#}
{#        </div>#}
{#        <div class="row mb-3" id="save_old_number_div">#}
{#            <label class="not_copy col-12 col-xl-4 col-lg-4 col-md-4 col-sm-4 col-form-label text-start"#}
{#                   for="save_old_number">{% trans "Transport vositasidagi DRBni saqlab qolish" %}</label>#}
{#            <div class="col-12 col-xl-8 col-lg-8 col-md-8 col-sm-8">#}
{#                <div class="row justify-content-start mt-1">#}
{#                    <div class="col-6 col-lg-4 col-xl-4 text-start">#}
{#                        <input type="radio" id="save_old_number_yes"#}
{#                               name="save_old_number" value="true"#}
{#                               class="form-check-input">#}
{#                        <label class="form-check-label" for="save_old_number_yes">Ha, saqlab qolaman</label>#}
{#                    </div>#}
{#                    <div class="col-6 col-lg-4 col-xl-4 text-start">#}
{#                        <input type="radio" id="save_old_number_no"#}
{#                               name="save_old_number" value="false" checked#}
{#                               class="form-check-input">#}
{#                        <label class="form-check-label" for="save_old_number_no">Yo'q, saqlab qolmayman</label>#}
{#                    </div>#}
{##}
{#                </div>#}
{#            </div>#}
{#        </div>#}
{#        <div class="row mb-3" id="lost_number_div">#}
{#            <label class="not_copy col-12 col-xl-4 col-lg-4 col-md-4 col-sm-4 col-form-label text-start"#}
{#                   for="lost_number">{% trans "Transport vositasidagi DRB yo'qolganmi?" %}<span#}
{#                    class="text-danger">*</span></label>#}
{#            <div class="col-12 col-xl-8 col-lg-8 col-md-8 col-sm-8">#}
{#                <div class="row justify-content-start mt-1">#}
{#                    <div class="col-6 col-lg-4 col-xl-4 text-start">#}
{#                        <input type="radio" id="lost_number_yes"#}
{#                               name="lost_number" value="true"#}
{#                               class="form-check-input">#}
{#                        <label class="form-check-label" for="lost_number_yes">Ha, yo'qolgan</label>#}
{#                    </div>#}
{#                    <div class="col-6 col-lg-4 col-xl-4 text-start">#}
{#                        <input type="radio" id="lost_number_no"#}
{#                               name="lost_number" value="false" checked#}
{#                               class="form-check-input">#}
{#                        <label class="form-check-label" for="lost_number_no">Yo'q, yo'qolmagan</label>#}
{#                    </div>#}
{##}
{#                </div>#}
{#            </div>#}
{#        </div>#}
{#        <div class="row mb-3" id="old_number_div">#}
{#            <label class="not_copy col-12 col-xl-4 col-lg-4 col-md-4 col-sm-4 col-form-label text-start"#}
{#                   for="old_number">{% trans "Transport vositasidagi DRB" %}<span#}
{#                    class="text-danger">*</span></label>#}
{#            <div class="col-12 col-xl-8 col-lg-8 col-md-8 col-sm-8">#}
{#                <input type="text" id="old_number" name="old_number"#}
{#                       class="form-control text-uppercase" required#}
{#                       placeholder="{% trans 'Masalan: 80979HBA' %}"#}
{#                       autocomplete="off">#}
{#            </div>#}
{#        </div>#}
{#        <div class="row mb-3" id="is_old_number_div">#}
{#            <label class="not_copy col-12 col-xl-4 col-lg-4 col-md-4 col-sm-4 col-form-label text-start"#}
{#                   for="is_old_number">{% trans 'Transport vositasidagi DRB eski namunadami? Masalan: 01 A 5555' %}<span#}
{#                    class="text-danger">*</span></label>#}
{#            <div class="col-12 col-xl-8 col-lg-8 col-md-8 col-sm-8">#}
{#                <div class="row justify-content-start mt-1">#}
{#                    <div class="col-6 col-lg-4 col-xl-4 text-start">#}
{#                        <input type="radio" id="is_old_number_yes"#}
{#                               name="is_old_number" value="true"#}
{#                               class="form-check-input">#}
{#                        <label class="form-check-label" for="is_old_number_yes">Ha, eski</label>#}
{#                    </div>#}
{#                    <div class="col-6 col-lg-4 col-xl-4 text-start">#}
{#                        <input type="radio" id="is_old_number_no" name="is_old_number"#}
{#                               class="form-check-input" value="false" checked>#}
{#                        <label class="form-check-label" for="is_old_number_no">Yo'q, eski emas</label>#}
{#                    </div>#}
{##}
{#                </div>#}
{##}
{##}
{#            </div>#}
{#        </div>#}
{#        <div class="row mb-3" id="is_saved_number_div">#}
{#            <label class="not_copy col-12 col-xl-4 col-lg-4 col-md-4 col-sm-4 col-form-label text-start"#}
{#                   for="is_saved_number">{% trans 'Yangi olinadigan DRB YXHB zahirasida saqlanmoqdami?' %}<span#}
{#                    class="text-danger">*</span></label>#}
{#            <div class="col-12 col-xl-8 col-lg-8 col-md-8 col-sm-8">#}
{#                <div class="row justify-content-start mt-1">#}
{#                    <div class="col-6 col-lg-4 col-xl-4 text-start">#}
{#                        <input type="radio" id="is_saved_number_yes" name="is_saved_number"#}
{#                               class="form-check-input" value="true">#}
{#                        <label class="form-check-label" for="is_saved_number_yes">Ha, saqlanyapti</label>#}
{#                    </div>#}
{#                    <div class="col-6 col-lg-4 col-xl-4 text-start">#}
{#                        <input type="radio" id="is_saved_number_no" name="is_saved_number"#}
{#                               class="form-check-input" checked value="false">#}
{#                        <label class="form-check-label" for="is_saved_number_no">Yo'q, saqlanmayapti</label>#}
{#                    </div>#}
{##}
{#                </div>#}
{#            </div>#}
{#        </div>#}
{#        <div class="row mb-3" id="saved_number_div" style="display: none">#}
{#            <label class="not_copy col-12 col-xl-4 col-lg-4 col-md-4 col-sm-4 col-form-label text-start"#}
{#                   for="saved_number">{% trans "Zahiradagi DRB" %}<span#}
{#                    class="text-danger">*</span></label>#}
{#            <div class="col-12 col-xl-8 col-lg-8 col-md-8 col-sm-8">#}
{#                <input type="text" id="saved_number"#}
{#                       class="form-control text-uppercase" required#}
{#                       placeholder="{% trans 'Masalan: 80979HBA' %}"#}
{#                       autocomplete="off">#}
{#            </div>#}
{#        </div>#}
{#        <div class="row mb-3" id="is_auction_div">#}
{#            <label class="not_copy col-12 col-xl-4 col-lg-4 col-md-4 col-sm-4 col-form-label text-start"#}
{#                   for="is_auction">{% trans 'Yangi olinadigan DRB auksiondan olinganmi?' %}<span#}
{#                    class="text-danger">*</span></label>#}
{#            <div class="col-12 col-xl-8 col-lg-8 col-md-8 col-sm-8">#}
{#                <div class="row justify-content-start mt-1">#}
{#                    <div class="col-6 col-lg-4 col-xl-4 text-start">#}
{#                        <input type="radio" id="is_auction_yes" name="is_auction"#}
{#                               class="form-check-input" value="true">#}
{#                        <label class="form-check-label" for="is_auction_yes">Ha, auksiondan olingan</label>#}
{#                    </div>#}
{#                    <div class="col-6 col-lg-4 col-xl-4 text-start">#}
{#                        <input type="radio" id="is_auction_no" name="is_auction"#}
{#                               class="form-check-input" checked value="false">#}
{#                        <label class="form-check-label" for="is_auction_no">Yo'q, auksiondan olinmagan</label>#}
{#                    </div>#}
{##}
{#                </div>#}
{##}
{##}
{#            </div>#}
{#        </div>#}
{#        <div class="row mb-3" id="auction_number_div" style="display: none">#}
{#            <label class="not_copy col-12 col-xl-4 col-lg-4 col-md-4 col-sm-4 col-form-label text-start"#}
{#                   for="auction_number">{% trans "Auksiondan olingan DRB" %}<span#}
{#                    class="text-danger">*</span></label>#}
{#            <div class="col-12 col-xl-8 col-lg-8 col-md-8 col-sm-8">#}
{#                <input type="text" id="auction_number"#}
{#                       class="form-control text-uppercase" required#}
{#                       placeholder="{% trans 'Masalan: 80979HBA' %}"#}
{#                       autocomplete="off">#}
{#            </div>#}
{#        </div>#}
{#        <div class="row mb-3">#}
{#            <label class="not_copy col-12 col-xl-4 col-lg-4 col-md-4 col-sm-4 col-form-label text-start"#}
{#                   for="device">{% trans "Alohida belgilar" %}</label>#}
{#            <div class="col-12 col-xl-8 col-lg-8 col-md-8 col-sm-8">#}
{#                <select id="device" name="device" class="form-control" multiple="multiple">#}
{#                </select>#}
{#            </div>#}
{#        </div>#}
{##}
{#        <div class="justify-content-end row">#}
{#            <div class="col-12">#}
{#                <button type="button" class="btn btn-secondary waves-effect waves-light float-start prev">Oldingi#}
{#                </button>#}
{#                <button type="button" id="fake" class="btn btn-danger">Fake</button>#}
{#                <button type="submit"#}
{#                        class="btn btn-info waves-effect waves-light float-end next">Keyingi#}
{#                </button>#}
{#            </div>#}
{#        </div>#}
{#    </form>#}
{#</fieldset>#}
{##}
{##}
{#{% block modals %}#}
{#    {% include 'modals/add_car_model_modal.html' %}#}
{#    {% include 'modals/add_car_color_modal.html' %}#}
{#{% endblock modals %}#}
{##}
{#{% block js %}#}
{#    <script src="{% static 'assets/libs/jquery/jquery.min.js' %}" type="text/javascript"></script>#}
{#    <script type="text/javascript">#}
{#        $(function () {#}
{#            getAjaxData('{% url "api_user:car_models_list" %}').then(function (res) {#}
{#                res.forEach((x, i) =>#}
{#                    $("#car").select2({#}
{#                        data: [{id: x.id, text: `${x.title}`}],#}
{#                        width: '100%',#}
{#                        placeholder: '-- modelni tanlang --',#}
{#                        templateResult: formatState,#}
{#                        escapeMarkup: function (markup) {#}
{#                            return markup;#}
{#                        },#}
{#                        language: {#}
{#                            noResults: function () {#}
{#                                return "Ma'lumot topilmadi! <a href='#' id='add_new_car_model'>Yangi model qo'shish</a>";#}
{#                            }#}
{#                        },#}
{#                    }).on('select2:close', function () {#}
{#                            var el = $(this);#}
{#                            if (el.val() === "new") {#}
{#                                $('#add_car_model_modal').modal('show')#}
{#                                $('#car').select2('close')#}
{#                            }#}
{#                        }#}
{#                    )#}
{#                );#}
{#            })#}
{##}
{#            getAjaxData('{% url "api_user:car_colors_list" %}').then(function (res) {#}
{#                res.forEach((x, i) =>#}
{#                    $("#color").select2({#}
{#                        data: [{id: x.id, text: `${x.title}`}],#}
{#                        width: '100%',#}
{#                        placeholder: '-- rangni tanlang --',#}
{#                        templateResult: formatState,#}
{#                        escapeMarkup: function (markup) {#}
{#                            return markup;#}
{#                        },#}
{#                        language: {#}
{#                            noResults: function () {#}
{#                                return "Ma'lumot topilmadi! <a href='#' id='add_new_color'>Yangi rang qo'shish</a>";#}
{#                            }#}
{#                        },#}
{#                    }).on('select2:close', function () {#}
{#                        var el = $(this);#}
{#                        if (el.val() === "new") {#}
{#                            $('#add_car_color_modal').modal('show')#}
{#                        }#}
{#                    })#}
{#                );#}
{#            })#}
{##}
{#            getAjaxData('{% url "api_user:car_body_types_list" %}').then(function (res) {#}
{#                res.forEach((x, i) =>#}
{#                    $("#body_type").select2({#}
{#                        data: [{id: x.id, text: `${x.title}`}],#}
{#                        width: '100%',#}
{#                        placeholder: '-- kuzov turini tanlang --',#}
{#                        templateResult: formatState,#}
{#                    })#}
{#                );#}
{#            })#}
{##}
{#            getAjaxData('{% url "api_user:car_types_list" %}').then(function (res) {#}
{#                console.log(res)#}
{#                res.forEach((x, i) =>#}
{#                    $('#type').append($('<option>').val(x.id).text(x.title))#}
{#                )#}
{#            }, function (err) {#}
{#                swal_error(err)#}
{#            })#}
{##}
{#            getAjaxData('{% url "api_user:car_fuel_types_list" %}').then(function (res) {#}
{#                console.log(res)#}
{#                res.forEach((x, i) =>#}
{#                    $('#fuel_type').append($('<option>').val(x.id).text(x.title))#}
{#                )#}
{#            }, function (err) {#}
{#                swal_error(err)#}
{#            })#}
{##}
{#            getAjaxData("{% url 'api_user:devices_list' %}").then(res => {#}
{#                $('#device').selectize({#}
{#                    inputClass: 'form-control selectize-input',#}
{#                    dropdownParent: "body",#}
{#                    placeholder: "Masalan: QO'SHIMCHA PEDAL",#}
{#                    options: res,#}
{#                    valueField: 'id',#}
{#                    labelField: 'title',#}
{#                    searchField: 'title',#}
{#                    onChange: function (value, isOnInitialize) {#}
{#                        swal.fire(#}
{#                            'Ogohlantirish',#}
{#                            'Agarda sizni transport vositangizda qo\'shimcha qayta jihoz mavjud bo\'lsa (gazdan tashqari) unda ushbu ro\'yhatdan uni tanlang. Agar qo\'shimcha jihoz ro\'yhatda bo\'lmasa, unda 919791999 raqamiga murojaat eting.',#}
{#                            'warning',#}
{#                        )#}
{#                    }#}
{#                });#}
{#            })#}
{##}
{#            var dateOpt = {#}
{#                format: 'dd',#}
{#                maxViewMode: 0,#}
{#                autoclose: true,#}
{#                language: 'ru',#}
{#            };#}
{##}
{#            $("#year").datepicker({#}
{#                format: "yyyy",#}
{#                viewMode: "years",#}
{#                minViewMode: "years",#}
{#                autoclose: true,#}
{#                language: 'ru',#}
{#                startDate: '-80y',#}
{#                endDate: '+0y',#}
{##}
{#            }).on('changeDate', function (e) {#}
{#                var month = $('#month').datepicker('getDate');#}
{#                if (!month) {#}
{#                    month = new Date();#}
{#                }#}
{#                dateOpt.defaultViewDate = {#}
{#                    year: e.date.getFullYear(),#}
{#                    month: month.getMonth(),#}
{#                    day: 1#}
{#                };#}
{#                // Reset date datepicker#}
{#                $('#day').datepicker('destroy');#}
{#                // Re-init with defaultViewDate option#}
{#                $('#day').datepicker(dateOpt);#}
{#                $(this).valid()#}
{#            })#}
{##}
{#            $("#month").datepicker({#}
{#                format: "MM",#}
{#                viewMode: "months",#}
{#                language: 'ru',#}
{#                minViewMode: "months",#}
{#                maxViewMode: 0,#}
{#                autoclose: true#}
{#            }).on('changeDate', function (e) {#}
{#                var year = $('#year').datepicker('getDate');#}
{#                if (!year) {#}
{#                    year = new Date();#}
{#                }#}
{#                dateOpt.defaultViewDate = {#}
{#                    year: year.getFullYear(),#}
{#                    month: e.date.getMonth(),#}
{#                    day: 1#}
{#                };#}
{#                $('#day').datepicker('destroy');#}
{#                $('#day').datepicker(dateOpt);#}
{#            });#}
{##}
{#            $("#day").datepicker(dateOpt)#}
{#        })#}
{#        $(document).ready(function () {#}
{#            $('#car_fieldset').bind('beforeShow', function () {#}
{##}
{#                $('#fake').on('click', function () {#}
{#                    generate_fake_data()#}
{#                })#}
{##}
{#                $('input[name=lost_technical_passport]').on('change', function () {#}
{#                    if ($('#lost_technical_passport_yes').prop('checked')) {#}
{#                        $('#old_technical_passport_div').hide()#}
{#                    } else {#}
{#                        $('#old_technical_passport_div').show()#}
{#                    }#}
{#                })#}
{#                $('input[name=is_auction]').on('change', function () {#}
{#                    if ($('#is_auction_yes').prop('checked')) {#}
{#                        $('#auction_number_div').show()#}
{#                        $('#saved_number_div').hide()#}
{#                        $('#is_saved_number_div').hide()#}
{#                    } else {#}
{#                        $('#is_saved_number_div').show()#}
{#                        $('#auction_number_div').hide()#}
{#                    }#}
{##}
{#                })#}
{##}
{#                $('input[name=is_old_number]').on('change', function () {#}
{#                    if ($('#is_old_number_yes').prop('checked')) {#}
{#                        $('#save_old_number_div').hide()#}
{#                    } else {#}
{#                        $('#save_old_number_div').show()#}
{#                    }#}
{#                })#}
{##}
{#                $('input[name=lost_number]').on('change', function () {#}
{#                    if ($('#lost_number_yes').prop('checked')) {#}
{#                        $('#old_number_div').hide()#}
{#                    } else {#}
{#                        $('#old_number_div').show()#}
{#                    }#}
{#                })#}
{##}
{#                $('input[name=is_saved_number]').on('change', function () {#}
{#                    if ($('#is_saved_number_yes').prop('checked')) {#}
{#                        $('#saved_number_div').show()#}
{#                        $('#auction_number_div').hide()#}
{##}
{#                        $('#is_auction_div').hide()#}
{#                    } else {#}
{#                        $('#saved_number_div').hide()#}
{#                        $('#is_auction_div').show()#}
{#                    }#}
{#                })#}
{##}
{#                $('input[name=save_old_number]').on('change', function () {#}
{#                    if ($('#save_old_number_yes').prop('checked')) {#}
{#                        $('#is_auction_div').hide()#}
{#                        $('#lost_number_div').hide()#}
{#                        $('#saved_number_div').hide()#}
{#                        $('#is_saved_number_div').hide()#}
{#                        $('#auction_number_div').hide()#}
{#                        $('#is_old_number_div').hide()#}
{#                    } else {#}
{#                        $('#is_auction_div').show()#}
{#                        $('#lost_number_div').show()#}
{#                        $('#is_saved_number_div').show()#}
{#                        $('#is_old_number_div').show()#}
{#                    }#}
{#                })#}
{##}
{##}
{#                $('input').change(function () {#}
{#                    if ($('#auction_number_div').is(':visible')) {#}
{#                        $('#auction_number').attr('name', 'auction_number')#}
{#                    } else {#}
{#                        $('#auction_number').removeAttr('name')#}
{#                    }#}
{##}
{#                    if ($('#old_number_div').is(':visible')) {#}
{#                        $('#old_number').attr('name', 'old_number')#}
{#                    } else {#}
{#                        $('#old_number').removeAttr('name')#}
{#                    }#}
{##}
{#                    if ($('#old_technical_passport_div').is(':visible')) {#}
{#                        $('#old_technical_passport').attr('name', 'old_technical_passport')#}
{#                    } else {#}
{#                        $('#old_technical_passport').removeAttr('name')#}
{#                    }#}
{##}
{#                    if ($('#saved_number_div').is(':visible')) {#}
{#                        $('#saved_number').attr('name', 'saved_number')#}
{#                    } else {#}
{#                        $('#saved_number').removeAttr('name')#}
{#                    }#}
{#                });#}
{##}
{##}
{#                $(document).on('click', '.icon', function () {#}
{#                    $(this).siblings('input').trigger('focus')#}
{#                })#}
{##}
{#                $(document).on('change', '#car, #color, #fuel_type', function () {#}
{#                    var selectedVal = $(this).children("option:selected").val();#}
{#                    if (parseInt(selectedVal)) {#}
{#                        $(this).valid()#}
{#                    }#}
{#                })#}
{##}
{#                var $carForm = $('#save_car_form');#}
{##}
                {#$carForm.submit(function (e) {#}
                {#e.preventDefault()#}
{##}
{#                if ($carForm.length) {#}
{#                    var carButton = $carForm.children().find('button:submit')#}
{#                    $carForm.validate({#}
{#                        ignore: ":hidden:not('#fuel_type')",#}
{#                        rules: {#}
{#                            //username is the name of the textbox#}
{#                            engine_number: {#}
{#                                required: true,#}
{#                                //alphanumeric is the custom method, we defined in the above#}
{#                                alphanumeric: true,#}
{#                                noSpace: true,#}
{#                            },#}
{#                            body_number: {#}
{#                                required: true,#}
{#                                alphanumeric: true,#}
{#                                noSpace: true,#}
{#                            },#}
{#                            fuel_type: {#}
{#                                required: true,#}
{#                            },#}
{#                            car: {#}
{#                                required: true,#}
{#                                selectRequired: true,#}
{#                            },#}
{#                            color: {#}
{#                                required: true,#}
{#                                selectRequired: true,#}
{#                            },#}
{#                            full_weight: {#}
{#                                required: true,#}
{#                            },#}
{#                            empty_weight: {#}
{#                                required: true,#}
{#                            },#}
{#                            engine_power: {#}
{#                                required: true,#}
{#                            },#}
{#                            price: {#}
{#                                required: true,#}
{#                            },#}
{#                            year: {#}
{#                                required: true,#}
{#                            },#}
{#                            auction_number: {#}
{#                                required: true,#}
{##}
{#                            },#}
{#                            old_technical_passport: {#}
{#                                required: true,#}
{#                                alphanumeric: true,#}
{#                                noSpace: true,#}
{#                            },#}
{#                            old_number: {#}
{#                                required: true,#}
{#                            },#}
{#                            saved_number: {#}
{#                                required: true,#}
{#                            },#}
{##}
{##}
{#                        },#}
{#                        messages: {#}
{#                            car: {#}
{#                                //error message for the required field#}
{#                                required: 'Transport vositasi modeli tanlanmagan!'#}
{#                            },#}
{#                            engine_number: {#}
{#                                //error message for the required field#}
{#                                required: 'Dvigatel raqami kiritilmagan!'#}
{#                            },#}
{#                            body_number: {#}
{#                                required: 'Kuzov raqami kiritilmagan!'#}
{#                            },#}
{#                            fuel_type: {#}
{#                                required: "Yoqilg'i turi tanlanmagan!",#}
{#                            },#}
{#                            full_weight: {#}
{#                                required: "To'la vazn kiritilmagan!",#}
{#                            },#}
{#                            empty_weight: {#}
{#                                required: "Yuksiz vazn kiritilmagan!",#}
{#                            },#}
{#                            engine_power: {#}
{#                                required: "Dvigatel quvvati kiritilmagan!",#}
{#                            },#}
{#                            year: {#}
{#                                required: "Ishlab chiqarilgan yil kiritilmagan!",#}
{#                            },#}
{#                            color: {#}
{#                                required: "Transport vositasi rangi tanlanmagan!",#}
{#                            },#}
{#                            price: {#}
{#                                required: "Transport vositasi narxi kiritilmagan!",#}
{#                            },#}
{#                            auction_number: {#}
{#                                required: "Auksiondan olingan DRB kiritilmagan!"#}
{#                            },#}
{#                            old_number: {#}
{#                                required: "Transport vositasidagi DRB kiritilmagan!"#}
{#                            },#}
{#                            old_technical_passport: {#}
{#                                required: "Qayd etish guvohnomasi seriyasi va raqami kiritilmagan!"#}
{#                            },#}
{#                            saved_number: {#}
{#                                required: "Zahiradagi DRB kiritilmagan!"#}
{#                            },#}
{##}
{##}
{#                        },#}
{#                        errorPlacement: function (error, element) {#}
{#                            if (element.is("#car")) {#}
{#                                error.appendTo(element.parents('.car'));#}
{#                            } else if (element.is("#fuel_type")) {#}
{#                                error.appendTo(element.parents('.fuel_type'));#}
{#                            } else if (element.is("#color")) {#}
{#                                error.appendTo(element.parents('.color'));#}
{#                            } else if (element.is(":checkbox")) {#}
{#                                error.appendTo(element.parents('.device'));#}
{#                            } else if (element.is("#full_weight")) {#}
{#                                error.appendTo(element.parents('.full_weight'));#}
{#                            } else if (element.is("#empty_weight")) {#}
{#                                error.appendTo(element.parents('.empty_weight'));#}
{#                            } else if (element.is("#engine_power")) {#}
{#                                error.appendTo(element.parents('.engine_power'));#}
{#                            } else if (element.is("#price")) {#}
{#                                error.appendTo(element.parents('.price'));#}
{#                            } else if (element.is("#year")) {#}
{#                                error.appendTo(element.parent('div'));#}
{#                            } else {#}
{#                                error.insertAfter(element);#}
{#                            }#}
{##}
{#                        },#}
{#                        submitHandler: function (form, e) {#}
{#                            e.preventDefault()#}
{##}
{#                            var day = 1#}
{#                            if ($('#day').val()) {#}
{#                                day = $('#day').val()#}
{#                            }#}
{##}
{#                            var month = 1#}
{#                            if ($('#month').val()) {#}
{#                                month = $('#month').val()#}
{#                            }#}
{##}
{#                            var year = $('#year').val()#}
{#                            var date = moment(`${day}-${month}-${year}`, "DD-MMMM-YYYY").format('YYYY-MM-DD')#}
{##}
{#                            if (!$(form).find('input[name="made_year"]').length) {#}
{#                                $("<input />").attr("type", "hidden")#}
{#                                    .attr("name", "made_year")#}
{#                                    .attr("value", date).appendTo(form);#}
{#                            } else {#}
{#                                $('input[name="made_year"]').val(date)#}
{#                            }#}
{##}
{#                            carButton.attr('disabled', true)#}
{#                            var carButtonValue = carButton.text()#}
{#                            carButton.html(`${carButtonValue}&nbsp<i class="fas fa-spinner fa-spin"></i>`)#}
{##}
{#                            var device = []#}
{#                            $('.device').each(function () {#}
{#                                if ($(this).prop('checked')) {#}
{#                                    device.push($(this).data('device'))#}
{#                                }#}
{#                            })#}
{##}
{#                            $('input[name ="device"]').empty().val(device)#}
{##}
{#                            if ($('#is_saved_number_yes').prop('checked') === true) {#}
{##}
{#                                if (!$(form).find('input[name="given_number"]').length) {#}
{#                                    $('input[name="given_number"]').val('')#}
{#                                    $("<input />").attr("type", "hidden")#}
{#                                        .attr("name", "given_number")#}
{#                                        .attr("value", $('#saved_number').val()).appendTo(form);#}
{#                                } else {#}
{#                                    $('input[name="given_number"]').val($('#saved_number').val())#}
{#                                }#}
{#                            } else {#}
{##}
{#                                if (!$(form).find('input[name="given_number"]').length) {#}
{#                                    $('input[name="given_number"]').val('')#}
{#                                    $("<input />").attr("type", "hidden")#}
{#                                        .attr("name", "given_number")#}
{#                                        .attr("value", $('#auction_number').val()).appendTo(form);#}
{#                                } else {#}
{#                                    $('input[name="given_number"]').val($('#auction_number').val())#}
{#                                }#}
{#                            }#}
{##}
{#                            if (!$(form).find('input[name="applicant"]').length) {#}
{#                                $("<input />").attr("type", "hidden")#}
{#                                    .attr("name", "applicant")#}
{#                                    .attr("value", $('#person').val()).appendTo(form);#}
{#                            }#}
{##}
{##}
{#                            $.ajax({#}
{#                                type: "POST",#}
{#                                url: "{% url 'api_application:create_contract_of_sale' %}",#}
{#                                data: $(form).serialize(),#}
{#                                success: function (response) {#}
{#                                    console.log(response)#}
{#                                    carButton.parents('fieldset').hide()#}
{#                                    carButton.parents('fieldset').nextAll('fieldset').first().show()#}
{##}
{#                                    carButton.attr('type', 'button');#}
{#                                    carButton.attr('disabled', false);#}
{#                                    carButton.html(carButtonValue)#}
{##}
{#                                    $('input[name ="application"]').val(response.id)#}
{##}
{#                                    $('#section_step').addClass('active')#}
{#                                    $('#car_step').removeClass('active')#}
{##}
{#                                    $carForm.find(":input:not('.next'):not('.prev')").each(function () {#}
{#                                        $(this).attr('disabled', true)#}
{#                                    });#}
{#                                },#}
{#                                error: function (err) {#}
{#                                    carButton.attr('type', 'submit')#}
{#                                    carButton.attr('disabled', false)#}
{#                                    carButton.html(carButtonValue)#}
{#                                    swal_error(err)#}
{#                                },#}
{##}
{#                            });#}
{#                            return false; // required to block normal submit since you used ajax#}
{#                        }#}
{#                    });#}
{#                }#}
{##}
{##}
{#            })#}
{#        })#}
{#    </script>#}
{#{% endblock js %}#}